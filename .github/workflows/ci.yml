name: CI 
 
on: 
 push: 
   branches: [ "main" ] 
 pull_request: 
   branches: [ "main" ] 
 
jobs: 
 lint_php: 
   name: Lint PHP 
   runs-on: ubuntu-latest 
   steps: 
     - name: Checkout code 
       uses: actions/checkout@v4 
 
     - name: Setup PHP 8.2 
       uses: shivammathur/setup-php@v2 
       with: 
         php-version: "8.2" 
 
     - name: PHP syntax check 
       run: | 
         echo " VÃ©rification syntaxe PHP" 
         php -l MonBlog_V3/src/index.php 
         php -l MonBlog_V3/src/Modele.php 
         php -l MonBlog_V3/src/vueAccueil.php 
         php -l MonBlog_V3/src/vueErreur.php 
         php -l MonBlog_V3/src/gabarit.php 
 
 build_docker: 
   name: Build Docker image 
   runs-on: ubuntu-latest 
   needs: lint_php 
   steps: 
     - name: Checkout code 
       uses: actions/checkout@v4 
 
     - name: Set up Docker Buildx 
       uses: docker/setup-buildx-action@v3 
 
     - name: Build Docker image 
       run: | 
         echo " Build Docker image" 
         cd MonBlog_V3
         docker build -t monblog-docker . 
 