name: CI 
 
on: 
 push: 
   branches: [ "main" ] 
 pull_request: 
   branches: [ "main" ] 
 
jobs:
  lint_php:
    name: Lint PHP
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: "8.2"

      - name: PHP syntax check
        run: |
          echo " VÃ©rification syntaxe PHP"
          cd MonBlog_V3/src
          php -l index.php
          php -l Modele.php
          php -l vueAccueil.php
          php -l vueErreur.php
          php -l gabarit.php

 
build_docker: 
   name: Build Docker image 
   runs-on: ubuntu-latest 
   needs: lint_php 
   steps: 
     - name: Checkout code 
       uses: actions/checkout@v4 
 
     - name: Set up Docker Buildx 
       uses: docker/setup-buildx-action@v3 
 
     - name: Build Docker image 
       run: | 
         echo " Build Docker image" 
         docker build -t monblog-docker . 
 